# MCP AI –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç

–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å MCP —Å–µ—Ä–≤–µ—Ä–∞–º–∏ (Jira, GitLab, Confluence, LDAP) —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–∞–∑–ª–∏—á–Ω—ã—Ö LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
MCP/
‚îú‚îÄ‚îÄ main.py                    # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ app.py                     # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ models.py                  # Pydantic –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ requirements.txt           # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ Dockerfile                 # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ docker-compose.yml         # Docker Compose
‚îú‚îÄ‚îÄ docker-compose-full.yml    # –ü–æ–ª–Ω–∞—è Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ auth/                      # –ú–æ–¥—É–ª–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ ad_auth.py            # Active Directory –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ admin_auth.py         # –ê–¥–º–∏–Ω –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ middleware.py         # Middleware –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ session_manager.py    # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏
‚îÇ
‚îú‚îÄ‚îÄ config/                    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ config_manager.py     # –ú–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ llm_config.py         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ llm_providers/             # LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ base_provider.py      # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ openai_provider.py    # OpenAI –ø—Ä–æ–≤–∞–π–¥–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ anthropic_provider.py # Anthropic Claude –ø—Ä–æ–≤–∞–π–¥–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ google_provider.py    # Google Gemini –ø—Ä–æ–≤–∞–π–¥–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ ollama_provider.py    # Ollama –ø—Ä–æ–≤–∞–π–¥–µ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ provider_factory.py   # –§–∞–±—Ä–∏–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ mcp_servers/               # MCP —Å–µ—Ä–≤–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ jira_server.py        # Jira MCP —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ gitlab_server.py      # GitLab MCP —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ atlassian_server.py   # Confluence MCP —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ ldap_server.py        # LDAP MCP —Å–µ—Ä–≤–µ—Ä
‚îÇ
‚îú‚îÄ‚îÄ analyzers/                 # –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ code_analyzer.py      # –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –∫–æ–¥–∞
‚îÇ
‚îú‚îÄ‚îÄ templates/                 # HTML —à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ index.html            # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îú‚îÄ‚îÄ login.html            # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îî‚îÄ‚îÄ admin.html            # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
‚îÇ
‚îú‚îÄ‚îÄ static/                    # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îÇ
‚îú‚îÄ‚îÄ tests/                     # –¢–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_ldap_toggle.py
‚îÇ   ‚îú‚îÄ‚îÄ test_llm_admin.py
‚îÇ   ‚îú‚îÄ‚îÄ test_llm_interaction.py
‚îÇ   ‚îú‚îÄ‚îÄ test_llm_providers.py
‚îÇ   ‚îî‚îÄ‚îÄ test_simple_architecture.py
‚îÇ
‚îú‚îÄ‚îÄ docs/                      # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ README.md             # –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ LLM_PROVIDERS.md      # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º
‚îÇ   ‚îî‚îÄ‚îÄ MCP_SETUP.md          # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MCP
‚îÇ
‚îú‚îÄ‚îÄ scripts/                   # –°–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ start.bat             # –ó–∞–ø—É—Å–∫ –Ω–∞ Windows
‚îÇ   ‚îî‚îÄ‚îÄ start.sh              # –ó–∞–ø—É—Å–∫ –Ω–∞ Linux/Mac
‚îÇ
‚îî‚îÄ‚îÄ config_files/              # –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    ‚îú‚îÄ‚îÄ app_config.json       # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    ‚îú‚îÄ‚îÄ admin_config.json     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–¥–º–∏–Ω–∞
    ‚îî‚îÄ‚îÄ python_ldap-*.whl     # Python LDAP –ø–∞–∫–µ—Ç
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –µ–≥–æ:

```bash
cp config_files/app_config.json.example config_files/app_config.json
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `config_files/app_config.json` —Å –≤–∞—à–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏.

### 3. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫
python main.py

# –ò–ª–∏ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç
scripts/start.sh    # Linux/Mac
scripts/start.bat   # Windows
```

### 4. –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é

- **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞**: http://localhost:8000
- **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: http://localhost:8000/docs
- **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å**: http://localhost:8000/admin

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `config_files/app_config.json`:

```json
{
  "llm": {
    "provider": "ollama",
    "providers": {
      "openai": {
        "enabled": false,
        "api_key": "your-key",
        "model": "gpt-4o-mini"
      },
      "ollama": {
        "enabled": true,
        "base_url": "http://localhost:11434",
        "model": "llama3.1:8b"
      }
    }
  },
  "active_directory": {
    "enabled": true,
    "server": "ldap://domain.local:389"
  }
}
```

### LLM –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã:
- **OpenAI**: GPT-4, GPT-3.5, GPT-4o-mini
- **Anthropic**: Claude-3.5-Sonnet, Claude-3-Haiku
- **Google**: Gemini-1.5-Flash, Gemini-1.5-Pro
- **Ollama**: –õ–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏ (Llama, Mistral, CodeLlama)
- **Local**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ API

–ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. [docs/LLM_PROVIDERS.md](docs/LLM_PROVIDERS.md)

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
python -m pytest tests/

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
python tests/test_llm_providers.py
python tests/test_llm_admin.py
```

## üê≥ Docker

### –ó–∞–ø—É—Å–∫ —Å Docker Compose

```bash
# –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
docker-compose up -d

# –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å Redis
docker-compose -f docker-compose-full.yml up -d
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [docs/README.md](docs/README.md) - –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [docs/LLM_PROVIDERS.md](docs/LLM_PROVIDERS.md) - LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
- [docs/MCP_SETUP.md](docs/MCP_SETUP.md) - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MCP

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- üîê **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Active Directory**
- üîí **JWT —Ç–æ–∫–µ–Ω—ã** –¥–ª—è —Å–µ—Å—Å–∏–π
- üç™ **Redis** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏—è–º–∏
- üõ°Ô∏è **Middleware –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**
- üë• **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä—É–ø–ø AD**

## ‚öôÔ∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è MCP —Å–µ—Ä–≤–µ—Ä–æ–≤
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

- **app.py** - FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- **models.py** - Pydantic –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- **llm_client.py** - –ö–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å LLM
- **mcp_client.py** - –ö–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å MCP —Å–µ—Ä–≤–µ—Ä–∞–º–∏
- **auth/** - –ú–æ–¥—É–ª–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- **llm_providers/** - –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- **mcp_servers/** - –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ MCP —Å–µ—Ä–≤–µ—Ä–æ–≤

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å –≤ `llm_providers/`
2. –ù–∞—Å–ª–µ–¥—É–π—Ç–µ—Å—å –æ—Ç `BaseLLMProvider`
3. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –º–µ—Ç–æ–¥—ã `generate_response` –∏ `generate_with_tools`
4. –î–æ–±–∞–≤—å—Ç–µ –≤ `provider_factory.py`

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ MCP —Å–µ—Ä–≤–µ—Ä–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å –≤ `mcp_servers/`
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –º–µ—Ç–æ–¥—ã `get_tools()` –∏ `call_tool()`
3. –î–æ–±–∞–≤—å—Ç–µ –≤ `mcp_client.py`

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.
