# ะกัััะบัััะฐ ะฟัะพะตะบัะฐ MCP AI ะััะธััะตะฝั

## ๐ ะะฑะทะพั ััััะบัััั

ะัะพะตะบั ะพัะณะฐะฝะธะทะพะฒะฐะฝ ะฟะพ ะฟัะธะฝัะธะฟั ัะฐะทะดะตะปะตะฝะธั ะพัะฒะตัััะฒะตะฝะฝะพััะธ (Separation of Concerns) ั ัะตัะบะธะผ ัะฐะทะดะตะปะตะฝะธะตะผ ะฝะฐ ะผะพะดัะปะธ ะธ ะบะพะผะฟะพะฝะตะฝัั.

## ๐๏ธ ะะตัะฐะปัะฝะพะต ะพะฟะธัะฐะฝะธะต

### ะะพัะฝะตะฒะฐั ะดะธัะตะบัะพัะธั

```
MCP/
โโโ main.py                    # ๐ ะขะพัะบะฐ ะฒัะพะดะฐ ะฟัะธะปะพะถะตะฝะธั
โโโ app.py                     # ๐ FastAPI ะฟัะธะปะพะถะตะฝะธะต ะธ API ัะฝะดะฟะพะธะฝัั
โโโ models.py                  # ๐ Pydantic ะผะพะดะตะปะธ ะดะฐะฝะฝัั
โโโ llm_client.py              # ๐ค ะะปะธะตะฝั ะดะปั ัะฐะฑะพัั ั LLM
โโโ mcp_client.py              # ๐ ะะปะธะตะฝั ะดะปั ัะฐะฑะพัั ั MCP ัะตัะฒะตัะฐะผะธ
โโโ requirements.txt           # ๐ฆ ะะฐะฒะธัะธะผะพััะธ Python
โโโ Dockerfile                 # ๐ณ Docker ะบะพะฝัะธะณััะฐัะธั
โโโ docker-compose.yml         # ๐ณ Docker Compose (ะฑะฐะทะพะฒะฐั)
โโโ docker-compose-full.yml    # ๐ณ Docker Compose (ะฟะพะปะฝะฐั)
โโโ .gitignore                 # ๐ซ ะะณะฝะพัะธััะตะผัะต ัะฐะนะปั Git
โโโ README.md                  # ๐ ะัะฝะพะฒะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั
```

### ๐ auth/ - ะััะตะฝัะธัะธะบะฐัะธั ะธ ะฐะฒัะพัะธะทะฐัะธั

```
auth/
โโโ __init__.py
โโโ ad_auth.py            # ๐ Active Directory ะฐััะตะฝัะธัะธะบะฐัะธั
โโโ admin_auth.py         # ๐ ะะดะผะธะฝ ะฐััะตะฝัะธัะธะบะฐัะธั
โโโ middleware.py         # ๐ก๏ธ Middleware ะดะปั ะฐะฒัะพัะธะทะฐัะธะธ
โโโ session_manager.py    # ๐ช ะฃะฟัะฐะฒะปะตะฝะธะต ัะตััะธัะผะธ
```

**ะะฐะทะฝะฐัะตะฝะธะต**: ะะฑะตัะฟะตัะธะฒะฐะตั ะฑะตะทะพะฟะฐัะฝะพััั ะธ ัะฟัะฐะฒะปะตะฝะธะต ะดะพัััะฟะพะผ ะบ ัะธััะตะผะต.

**ะะปััะตะฒัะต ะบะพะผะฟะพะฝะตะฝัั**:
- `ad_auth.py` - ะธะฝัะตะณัะฐัะธั ั Active Directory
- `admin_auth.py` - ัะฟะตัะธะฐะปัะฝะฐั ะฐััะตะฝัะธัะธะบะฐัะธั ะดะปั ะฐะดะผะธะฝะธัััะฐัะพัะพะฒ
- `middleware.py` - ะฟัะพะฒะตัะบะฐ ะฟัะฐะฒ ะดะพัััะฟะฐ ะบ API
- `session_manager.py` - ัะฟัะฐะฒะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปััะบะธะผะธ ัะตััะธัะผะธ

### ๐ config/ - ะะพะฝัะธะณััะฐัะธั ัะธััะตะผั

```
config/
โโโ __init__.py
โโโ config_manager.py     # โ๏ธ ะะตะฝะตะดะถะตั ะบะพะฝัะธะณััะฐัะธะธ
โโโ llm_config.py         # ๐ค ะะพะฝัะธะณััะฐัะธั LLM ะฟัะพะฒะฐะนะดะตัะพะฒ
```

**ะะฐะทะฝะฐัะตะฝะธะต**: ะฆะตะฝััะฐะปะธะทะพะฒะฐะฝะฝะพะต ัะฟัะฐะฒะปะตะฝะธะต ะฝะฐัััะพะนะบะฐะผะธ ัะธััะตะผั.

**ะะปััะตะฒัะต ะบะพะผะฟะพะฝะตะฝัั**:
- `config_manager.py` - ะทะฐะณััะทะบะฐ ะธ ัะพััะฐะฝะตะฝะธะต ะบะพะฝัะธะณััะฐัะธะธ
- `llm_config.py` - ะฝะฐัััะพะนะบะธ ะดะปั ัะฐะทะปะธัะฝัั LLM ะฟัะพะฒะฐะนะดะตัะพะฒ

### ๐ llm_providers/ - LLM ะฟัะพะฒะฐะนะดะตัั

```
llm_providers/
โโโ __init__.py
โโโ base_provider.py      # ๐๏ธ ะะฐะทะพะฒัะน ะบะปะฐัั ะฟัะพะฒะฐะนะดะตัะฐ
โโโ openai_provider.py    # ๐ง OpenAI ะฟัะพะฒะฐะนะดะตั
โโโ anthropic_provider.py # ๐ค Anthropic Claude ะฟัะพะฒะฐะนะดะตั
โโโ google_provider.py    # ๐ Google Gemini ะฟัะพะฒะฐะนะดะตั
โโโ ollama_provider.py    # ๐ฅ๏ธ Ollama ะฟัะพะฒะฐะนะดะตั
โโโ provider_factory.py   # ๐ญ ะคะฐะฑัะธะบะฐ ะฟัะพะฒะฐะนะดะตัะพะฒ
```

**ะะฐะทะฝะฐัะตะฝะธะต**: ะะฑัััะฐะบัะธั ะดะปั ัะฐะฑะพัั ั ัะฐะทะปะธัะฝัะผะธ LLM ะฟัะพะฒะฐะนะดะตัะฐะผะธ.

**ะะปััะตะฒัะต ะบะพะผะฟะพะฝะตะฝัั**:
- `base_provider.py` - ะพะฑัะธะน ะธะฝัะตััะตะนั ะดะปั ะฒัะตั ะฟัะพะฒะฐะนะดะตัะพะฒ
- `*_provider.py` - ะบะพะฝะบัะตัะฝัะต ัะตะฐะปะธะทะฐัะธะธ ะฟัะพะฒะฐะนะดะตัะพะฒ
- `provider_factory.py` - ัะพะทะดะฐะฝะธะต ัะบะทะตะผะฟะปััะพะฒ ะฟัะพะฒะฐะนะดะตัะพะฒ

### ๐ mcp_servers/ - MCP ัะตัะฒะตัั

```
mcp_servers/
โโโ __init__.py
โโโ jira_server.py        # ๐ Jira MCP ัะตัะฒะตั
โโโ gitlab_server.py      # ๐ GitLab MCP ัะตัะฒะตั
โโโ atlassian_server.py   # ๐ Confluence MCP ัะตัะฒะตั
โโโ ldap_server.py        # ๐ฅ LDAP MCP ัะตัะฒะตั
```

**ะะฐะทะฝะฐัะตะฝะธะต**: ะะฝัะตะณัะฐัะธั ั ะฒะฝะตัะฝะธะผะธ ัะธััะตะผะฐะผะธ ัะตัะตะท MCP ะฟัะพัะพะบะพะป.

**ะะปััะตะฒัะต ะบะพะผะฟะพะฝะตะฝัั**:
- ะะฐะถะดัะน ัะตัะฒะตั ัะตะฐะปะธะทัะตั ััะฐะฝะดะฐััะฝัะน ะธะฝัะตััะตะนั
- ะะพะดะดะตัะถะบะฐ ะธะฝััััะผะตะฝัะพะฒ (tools) ะดะปั ะบะฐะถะดะพะน ัะธััะตะผั
- ะฃัะปะพะฒะฝะฐั ะทะฐะณััะทะบะฐ (ะผะพะถะฝะพ ะพัะบะปััะฐัั ัะตัะตะท ะบะพะฝัะธะณััะฐัะธั)

### ๐ analyzers/ - ะะฝะฐะปะธะทะฐัะพัั

```
analyzers/
โโโ __init__.py
โโโ code_analyzer.py      # ๐ ะะฝะฐะปะธะทะฐัะพั ะบะพะดะฐ
```

**ะะฐะทะฝะฐัะตะฝะธะต**: ะะฝะฐะปะธะท ะธ ะพะฑัะฐะฑะพัะบะฐ ัะฐะทะปะธัะฝัั ัะธะฟะพะฒ ะดะฐะฝะฝัั.

### ๐ templates/ - HTML ัะฐะฑะปะพะฝั

```
templates/
โโโ index.html            # ๐ ะะปะฐะฒะฝะฐั ัััะฐะฝะธัะฐ
โโโ login.html            # ๐ ะกััะฐะฝะธัะฐ ะฒัะพะดะฐ
โโโ admin.html            # โ๏ธ ะะดะผะธะฝ-ะฟะฐะฝะตะปั
```

**ะะฐะทะฝะฐัะตะฝะธะต**: ะะพะปัะทะพะฒะฐัะตะปััะบะธะน ะธะฝัะตััะตะนั ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธั.

### ๐ static/ - ะกัะฐัะธัะตัะบะธะต ัะฐะนะปั

```
static/
โโโ (CSS, JS, ะธะทะพะฑัะฐะถะตะฝะธั)
```

**ะะฐะทะฝะฐัะตะฝะธะต**: ะกัะฐัะธัะตัะบะธะต ัะตััััั ะดะปั ะฒะตะฑ-ะธะฝัะตััะตะนัะฐ.

### ๐ tests/ - ะขะตััั

```
tests/
โโโ test_ldap_toggle.py      # ๐งช ะขะตัั ะพัะบะปััะตะฝะธั LDAP
โโโ test_llm_admin.py        # ๐งช ะขะตัั ะฐะดะผะธะฝ-ะฟะฐะฝะตะปะธ LLM
โโโ test_llm_interaction.py  # ๐งช ะขะตัั ะฒะทะฐะธะผะพะดะตะนััะฒะธั ั LLM
โโโ test_llm_providers.py    # ๐งช ะขะตัั LLM ะฟัะพะฒะฐะนะดะตัะพะฒ
```

**ะะฐะทะฝะฐัะตะฝะธะต**: ะะฒัะพะผะฐัะธะทะธัะพะฒะฐะฝะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต ััะฝะบัะธะพะฝะฐะปัะฝะพััะธ.

### ๐ docs/ - ะะพะบัะผะตะฝัะฐัะธั

```
docs/
โโโ README.md             # ๐ ะัะฝะพะฒะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั
โโโ LLM_PROVIDERS.md      # ๐ค ะะพะบัะผะตะฝัะฐัะธั ะฟะพ LLM ะฟัะพะฒะฐะนะดะตัะฐะผ
โโโ MCP_SETUP.md          # ๐ง ะะฐัััะพะนะบะฐ MCP
โโโ PROJECT_STRUCTURE.md  # ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ (ััะพั ัะฐะนะป)
```

**ะะฐะทะฝะฐัะตะฝะธะต**: ะขะตัะฝะธัะตัะบะฐั ะดะพะบัะผะตะฝัะฐัะธั ะธ ััะบะพะฒะพะดััะฒะฐ.

### ๐ scripts/ - ะกะบัะธะฟัั

```
scripts/
โโโ start.bat             # ๐ช ะะฐะฟััะบ ะฝะฐ Windows
โโโ start.sh              # ๐ง ะะฐะฟััะบ ะฝะฐ Linux/Mac
```

**ะะฐะทะฝะฐัะตะฝะธะต**: ะกะบัะธะฟัั ะดะปั ัะดะพะฑะฝะพะณะพ ะทะฐะฟััะบะฐ ะฟัะธะปะพะถะตะฝะธั.

### ๐ config_files/ - ะคะฐะนะปั ะบะพะฝัะธะณััะฐัะธะธ

```
config_files/
โโโ app_config.json.example    # ๐ ะัะธะผะตั ะบะพะฝัะธะณััะฐัะธะธ
โโโ app_config.json            # โ๏ธ ะัะฝะพะฒะฝะฐั ะบะพะฝัะธะณััะฐัะธั
โโโ admin_config.json          # ๐ ะะพะฝัะธะณััะฐัะธั ะฐะดะผะธะฝะฐ
โโโ python_ldap-*.whl          # ๐ฆ Python LDAP ะฟะฐะบะตั
```

**ะะฐะทะฝะฐัะตะฝะธะต**: ะคะฐะนะปั ะบะพะฝัะธะณััะฐัะธะธ ะธ ะดะพะฟะพะปะฝะธัะตะปัะฝัะต ะฟะฐะบะตัั.

## ๐ ะะพัะพะบะธ ะดะฐะฝะฝัั

### 1. ะะฐะฟัะพั ะฟะพะปัะทะพะฒะฐัะตะปั
```
ะะพะปัะทะพะฒะฐัะตะปั โ templates/ โ app.py โ llm_client.py โ llm_providers/
```

### 2. ะะฑัะฐะฑะพัะบะฐ ั ะธะฝััััะผะตะฝัะฐะผะธ
```
LLM โ mcp_client.py โ mcp_servers/ โ ะะฝะตัะฝะธะต ัะธััะตะผั
```

### 3. ะััะตะฝัะธัะธะบะฐัะธั
```
ะะฐะฟัะพั โ auth/middleware.py โ auth/ad_auth.py โ Active Directory
```

## ๐๏ธ ะััะธัะตะบัััะฝัะต ะฟัะธะฝัะธะฟั

### 1. ะะฐะทะดะตะปะตะฝะธะต ะพัะฒะตัััะฒะตะฝะฝะพััะธ
- ะะฐะถะดัะน ะผะพะดัะปั ะพัะฒะตัะฐะตั ะทะฐ ัะฒะพั ะพะฑะปะฐััั
- ะงะตัะบะธะต ะธะฝัะตััะตะนัั ะผะตะถะดั ะผะพะดัะปัะผะธ
- ะะธะฝะธะผะฐะปัะฝัะต ะทะฐะฒะธัะธะผะพััะธ

### 2. ะะพะฝัะธะณััะธััะตะผะพััั
- ะัะต ะฝะฐัััะพะนะบะธ ะฒ `config_files/`
- ะะพะทะผะพะถะฝะพััั ะพัะบะปััะตะฝะธั ะบะพะผะฟะพะฝะตะฝัะพะฒ
- ะะธะฑะบะฐั ะฝะฐัััะพะนะบะฐ ะฟัะพะฒะฐะนะดะตัะพะฒ

### 3. ะะฐััะธััะตะผะพััั
- ะะตะณะบะพ ะดะพะฑะฐะฒะปััั ะฝะพะฒัะต LLM ะฟัะพะฒะฐะนะดะตัั
- ะัะพััะพะต ะดะพะฑะฐะฒะปะตะฝะธะต MCP ัะตัะฒะตัะพะฒ
- ะะพะดัะปัะฝะฐั ะฐััะธัะตะบัััะฐ

### 4. ะขะตััะธััะตะผะพััั
- ะัะดะตะปัะฝัะต ัะตััั ะดะปั ะบะฐะถะดะพะณะพ ะบะพะผะฟะพะฝะตะฝัะฐ
- ะะพะบะธัะพะฒะฐะฝะธะต ะฒะฝะตัะฝะธั ะทะฐะฒะธัะธะผะพััะตะน
- ะะฒัะพะผะฐัะธะทะธัะพะฒะฐะฝะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต

## ๐ ะะฐะทะฒะตัััะฒะฐะฝะธะต

### ะะพะบะฐะปัะฝะฐั ัะฐะทัะฐะฑะพัะบะฐ
```bash
python main.py
```

### Docker
```bash
docker-compose up -d
```

### ะัะพะดะฐะบัะฝ
```bash
# ะะฐัััะพะนะบะฐ ะบะพะฝัะธะณััะฐัะธะธ
cp config_files/app_config.json.example config_files/app_config.json
# ะะตะดะฐะบัะธัะพะฒะฐะฝะธะต ะฝะฐัััะพะตะบ
# ะะฐะฟััะบ
python main.py
```

## ๐ง ะะฐะทัะฐะฑะพัะบะฐ

### ะะพะฑะฐะฒะปะตะฝะธะต ะฝะพะฒะพะณะพ LLM ะฟัะพะฒะฐะนะดะตัะฐ
1. ะกะพะทะดะฐัั ะบะปะฐัั ะฒ `llm_providers/`
2. ะะฐัะปะตะดะพะฒะฐัััั ะพั `BaseLLMProvider`
3. ะะพะฑะฐะฒะธัั ะฒ `provider_factory.py`
4. ะะฑะฝะพะฒะธัั ะบะพะฝัะธะณััะฐัะธั

### ะะพะฑะฐะฒะปะตะฝะธะต ะฝะพะฒะพะณะพ MCP ัะตัะฒะตัะฐ
1. ะกะพะทะดะฐัั ะบะปะฐัั ะฒ `mcp_servers/`
2. ะะตะฐะปะธะทะพะฒะฐัั ะผะตัะพะดั `get_tools()` ะธ `call_tool()`
3. ะะพะฑะฐะฒะธัั ะฒ `mcp_client.py`
4. ะะฑะฝะพะฒะธัั ะฐะดะผะธะฝ-ะฟะฐะฝะตะปั

### ะะพะฑะฐะฒะปะตะฝะธะต ะฝะพะฒะพะณะพ API ัะฝะดะฟะพะธะฝัะฐ
1. ะะพะฑะฐะฒะธัั ะฒ `app.py`
2. ะกะพะทะดะฐัั ะผะพะดะตะปั ะฒ `models.py`
3. ะะพะฑะฐะฒะธัั ัะตััั ะฒ `tests/`
4. ะะฑะฝะพะฒะธัั ะดะพะบัะผะตะฝัะฐัะธั

## ๐ ะะตััะธะบะธ ะธ ะผะพะฝะธัะพัะธะฝะณ

- ะะพะณะธัะพะฒะฐะฝะธะต ัะตัะตะท ััะฐะฝะดะฐััะฝัะน Python logging
- Health check ัะฝะดะฟะพะธะฝัั ะดะปั ะบะฐะถะดะพะณะพ ัะตัะฒะธัะฐ
- ะะตััะธะบะธ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ ะฒ ะฐะดะผะธะฝ-ะฟะฐะฝะตะปะธ
- ะััะปะตะถะธะฒะฐะฝะธะต ะพัะธะฑะพะบ ะธ ะธัะบะปััะตะฝะธะน

## ๐ ะะตะทะพะฟะฐัะฝะพััั

- JWT ัะพะบะตะฝั ะดะปั ะฐััะตะฝัะธัะธะบะฐัะธะธ
- Middleware ะดะปั ะฟัะพะฒะตัะบะธ ะฟัะฐะฒ ะดะพัััะฟะฐ
- ะจะธััะพะฒะฐะฝะธะต ะฟะฐัะพะปะตะน ะธ API ะบะปััะตะน
- ะะฐะปะธะดะฐัะธั ะฒัะพะดะฝัั ะดะฐะฝะฝัั ัะตัะตะท Pydantic
- CORS ะฝะฐัััะพะนะบะธ ะดะปั ะฒะตะฑ-ะธะฝัะตััะตะนัะฐ
